create table customer (
    ip varchar(15) primary key not null);
		

CREATE TABLE product (
    id integer PRIMARY KEY,
	product_name varchar(100),
    product_category varchar(100) not null);


CREATE TABLE customer_transaction (
    id integer PRIMARY KEY,
	produc_id integer NOT NULL,
    ip varchar(15) NOT NULL,
    date_time timestamp  not null,
    action_type varchar(30),
    FOREIGN KEY (produc_id) REFERENCES product(id),
    FOREIGN KEY (ip) REFERENCES customer(ip));

	
CREATE TABLE cart (
    id integer PRIMARY KEY,
    ip varchar(15) NOT NULL,
    is_paid integer default 0,
    FOREIGN KEY (ip) REFERENCES customer(ip));;


CREATE TABLE cart_product (
    id integer PRIMARY KEY,
    cart_id integer NOT NULL,
    product_id integer not null,
    amount integer not null default 1,
    FOREIGN KEY (cart_id) REFERENCES cart(id),
	FOREIGN KEY (product_id) REFERENCES product(id));

	
		
	
CREATE TABLE parsed_log (
    id SERIAL,
	ip varchar(15) NOT NULL,
    url varchar(255),	
	date_time timestamp  not null,
	product_id integer,
	cart_id integer,
	amount integer,
	customer_id integer);
	
	
	